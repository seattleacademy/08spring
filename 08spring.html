<!doctype html>
<html>

<head>
    <title>Drone Simulator</title>
    <meta charset="utf-8">
    <script src="js/three.min.js"></script>
    <script src="js/OrbitControls.js"></script>
</head>

<body>
    <canvas id="myCanvas" width="600" height="400"></canvas>
    <script>
    var scene, camera, renderer;

    init();
    animate();


    // initialize scene
    function init() {
        canvas = document.getElementById("myCanvas");
        //setup renderer
        scene = new THREE.Scene();

        var width = canvas.width;
        var height = canvas.height;
        renderer = new THREE.WebGLRenderer({
            canvas: canvas,
            antialias: true
        });

        renderer.setSize(width, height);

        //renderer.setClearColor(0x3f4a51, 1);
        //background color and opacity
        renderer.setClearColor(0x00FF00, .8);



        // setup materials for making things look decent
        var material = new THREE.MeshPhongMaterial({
            // color: 0xAAAAAA,
            // specular: 0x111111,
            color: 0x0000FF,
            specular: 0xFF0000,
            shininess: 200
        });


        // start adding objects to the scene, these are the planes that make up the floor and walls
        var plane = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), material);
        plane.position.set(0, 4, 0);
        plane.rotation.x = -Math.PI / 2;
        scene.add(plane);

        //Left Wall
        var wall1 = new THREE.Mesh(new THREE.PlaneGeometry(80, 20), material);
        wall1.position.set(-10, 14, -50);
        wall1.rotation.x = 0;
        wall1.material.side = THREE.DoubleSide;
        scene.add(wall1);
        //Front Wall
        var wall2 = new THREE.Mesh(new THREE.PlaneGeometry(100, 20), material);
        wall2.position.set(-50, 14, 0);
        wall2.rotation.y = -Math.PI / 2;
        wall2.material.side = THREE.DoubleSide;
        scene.add(wall2);
        //Right Wall
        var wall3 = new THREE.Mesh(new THREE.PlaneGeometry(100, 20), material);
        //slide, updown, inout
        wall3.position.set(0, 14, 50);
        wall3.rotation.y = 0;
        wall3.material.side = THREE.DoubleSide;
        scene.add(wall3);
        //BackWall
        var wall4 = new THREE.Mesh(new THREE.PlaneGeometry(100, 20), material);
        wall4.position.set(50, 14, 0);
        wall4.rotation.y = -Math.PI / 2;
        wall4.material.side = THREE.DoubleSide;
        scene.add(wall4);


        var roomba = new THREE.Mesh(new THREE.CylinderGeometry(5, 5, 3, 100, 10), new THREE.MeshNormalMaterial());
        roomba.position.set(-30, 5, -40);
        roomba.rotation.x = 0;
        scene.add(roomba);


        // add a torus that will be the drone
        var torus = new THREE.Mesh(new THREE.TorusGeometry(5, 5, 80, 60, Math.PI * 2), new THREE.MeshNormalMaterial());
        torus.position.set(0, 12, 0);
        torus.rotation.x = Math.PI / 2;
        // add the torus to the scene
        scene.add(torus);


        // make movement controls for the torus object
        window.addEventListener("keydown", function(event) {
            switch (event.keyCode) {
                case 87: //w
                    torus.position.x += 1;
                    break;
                case 83: //s
                    torus.position.x -= 1;
                    break;
                case 65:
                    torus.position.z -= 1;
                    break;
                case 68:
                    torus.position.z += 1;
                    break;
                case 81:
                    torus.position.y += 1;
                    break;
                case 69:
                    torus.position.y -= 1;
                    break;
                case 192:
                    console.log("Camera Position:", camera.position.x + " " + camera.position.y + " " + camera.position.z)
                    break;
            }
        });

        // create camera and position in the scene
        camera = new THREE.PerspectiveCamera(160, width / height, 0.1, 20000);
        camera.position.set(-70, 50, -10);
        scene.add(camera);

        // light sources
        var light = new THREE.PointLight(0xffffff);
        light.position.set(-100, 200, 100);
        scene.add(light);

        var light2 = new THREE.PointLight(0xffffff);
        light2.position.set(100, 200, -100);
        scene.add(light2);

        // controls for moving the camera
        var controls = new THREE.OrbitControls(camera, renderer.domElement);

    }
    // threejs updater
    function animate() {
        requestAnimationFrame(animate);
        // render scene
        renderer.render(scene, camera);
    }
    </script>
</body>

</html>
